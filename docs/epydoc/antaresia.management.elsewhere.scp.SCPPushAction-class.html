<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>antaresia.management.elsewhere.scp.SCPPushAction</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="antaresia.management.elsewhere-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >Elswhere</th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        Package&nbsp;antaresia ::
        Package&nbsp;management ::
        <a href="antaresia.management.elsewhere-module.html">Package&nbsp;elsewhere</a> ::
        <a href="antaresia.management.elsewhere.scp-module.html">Module&nbsp;scp</a> ::
        Class&nbsp;SCPPushAction
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="antaresia.management.elsewhere.scp.SCPPushAction-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class SCPPushAction</h1><p class="nomargin-top"><span class="codelink"><a href="antaresia.management.elsewhere.scp-pysrc.html#SCPPushAction">source&nbsp;code</a></span></p>
<pre class="base-tree">
     object --+    
              |    
<a href="antaresia.management.elsewhere.base.BaseAction-class.html">base.BaseAction</a> --+
                  |
                 <strong class="uidshort">SCPPushAction</strong>
</pre>

<hr />
<p>The SCP Push action pushes files up to a server through scp. Note that
  because scp is technically just over ssh, it's assumed ssh access will 
  work, and requires an ssh session concurrently with the scp process. (The
  scp action takes care of making the ssh session if one isn't already 
  logged in)</p>
  <p>In order to implement transactions, this action first logs into your 
  server over ssh, makes a backup for the target server directory.</p>
  <p>Files from local are then SCP copied to the server. If transactions 
  need to rallback, the tmp folder is moved back to the original 
  folder.</p>
  <p>Finalization goes back onto the server through the ssh session, and 
  deletes the tmp folder.</p>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="antaresia.management.elsewhere.scp.SCPPushAction-class.html#setup" class="summary-sig-name">setup</a>(<span class="summary-sig-arg">self</span>)</span><br />
      A hook to setup variables that the action needs, but needs to be 
      setup before validate() is called.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="antaresia.management.elsewhere.scp-pysrc.html#SCPPushAction.setup">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="antaresia.management.elsewhere.scp.SCPPushAction-class.html#validate" class="summary-sig-name">validate</a>(<span class="summary-sig-arg">self</span>)</span><br />
      A hook to validate that the action has the correct information to 
      proceed.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="antaresia.management.elsewhere.scp-pysrc.html#SCPPushAction.validate">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="antaresia.management.elsewhere.scp.SCPPushAction-class.html#run" class="summary-sig-name">run</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Run the action.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="antaresia.management.elsewhere.scp-pysrc.html#SCPPushAction.run">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="antaresia.management.elsewhere.scp.SCPPushAction-class.html#revert" class="summary-sig-name">revert</a>(<span class="summary-sig-arg">self</span>)</span><br />
      A hook to revert the action.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="antaresia.management.elsewhere.scp-pysrc.html#SCPPushAction.revert">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="antaresia.management.elsewhere.scp.SCPPushAction-class.html#finalize" class="summary-sig-name">finalize</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Finalize the scp push.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="antaresia.management.elsewhere.scp-pysrc.html#SCPPushAction.finalize">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code><a href="antaresia.management.elsewhere.base.BaseAction-class.html">base.BaseAction</a></code></b>:
      <code><a href="antaresia.management.elsewhere.base.BaseAction-class.html#__init__">__init__</a></code>,
      <code><a href="antaresia.management.elsewhere.base.BaseAction-class.html#get_ip_and_user">get_ip_and_user</a></code>,
      <code><a href="antaresia.management.elsewhere.base.BaseAction-class.html#get_logged_in_client">get_logged_in_client</a></code>,
      <code><a href="antaresia.management.elsewhere.base.BaseAction-class.html#get_password">get_password</a></code>,
      <code><a href="antaresia.management.elsewhere.base.BaseAction-class.html#get_password_in_opt">get_password_in_opt</a></code>,
      <code><a href="antaresia.management.elsewhere.base.BaseAction-class.html#get_server_info">get_server_info</a></code>,
      <code><a href="antaresia.management.elsewhere.base.BaseAction-class.html#get_server_name">get_server_name</a></code>,
      <code><a href="antaresia.management.elsewhere.base.BaseAction-class.html#teardown">teardown</a></code>
      </p>
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__delattr__</code>,
      <code>__getattribute__</code>,
      <code>__hash__</code>,
      <code>__new__</code>,
      <code>__reduce__</code>,
      <code>__reduce_ex__</code>,
      <code>__repr__</code>,
      <code>__setattr__</code>,
      <code>__str__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== CLASS VARIABLES ==================== -->
<a name="section-ClassVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="antaresia.management.elsewhere.scp.SCPPushAction-class.html#mkdir_permission_denied" class="summary-name">mkdir_permission_denied</a> = <code title="'Permission was denied to make the target server directory.'"><code class="variable-quote">'</code><code class="variable-string">Permission was denied to make the t</code><code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="antaresia.management.elsewhere.scp.SCPPushAction-class.html#missing_serverdir_key" class="summary-name">missing_serverdir_key</a> = <code title="'SCP push action requires a \'serverdir\' key in the action parameters\
.'"><code class="variable-quote">'</code><code class="variable-string">SCP push action requires a \'serverdi</code><code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="antaresia.management.elsewhere.scp.SCPPushAction-class.html#missing_localdir_key" class="summary-name">missing_localdir_key</a> = <code title="'SCP push action requires a \'localdir\' key in the action parameters.\
'"><code class="variable-quote">'</code><code class="variable-string">SCP push action requires a \'localdir\</code><code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
</table>
<!-- ==================== PROPERTIES ==================== -->
<a name="section-Properties"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Properties</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Properties"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__class__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="setup"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">setup</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="antaresia.management.elsewhere.scp-pysrc.html#SCPPushAction.setup">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>A hook to setup variables that the action needs, but needs to be setup
  before validate() is called.</p>
  <dl class="fields">
    <dt>Overrides:
        <a href="antaresia.management.elsewhere.base.BaseAction-class.html#setup">base.BaseAction.setup</a>
        <dd><em class="note">(inherited documentation)</em></dd>
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="validate"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">validate</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="antaresia.management.elsewhere.scp-pysrc.html#SCPPushAction.validate">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>A hook to validate that the action has the correct information to 
  proceed. Called before any actions actually run.</p>
  <p>You should use this to validate information, and raise an exception so
  that the action runner doesn't run any actions.</p>
  <p>This helps limit the possibility of transaction rollbacks happening 
  frequently.</p>
  <dl class="fields">
    <dt>Overrides:
        <a href="antaresia.management.elsewhere.base.BaseAction-class.html#validate">base.BaseAction.validate</a>
        <dd><em class="note">(inherited documentation)</em></dd>
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="run"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">run</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="antaresia.management.elsewhere.scp-pysrc.html#SCPPushAction.run">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Run the action. This is called after setup, and validate.</p>
  <dl class="fields">
    <dt>Overrides:
        <a href="antaresia.management.elsewhere.base.BaseAction-class.html#run">base.BaseAction.run</a>
        <dd><em class="note">(inherited documentation)</em></dd>
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="revert"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">revert</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="antaresia.management.elsewhere.scp-pysrc.html#SCPPushAction.revert">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>A hook to revert the action. This is never called unless some action 
  in the actions list raises an exception. Any exception raised from the 
  &quot;run&quot; method will trigger transaction rollbacks.</p>
  <p>Also note that your actions list has formatted a certain way to turn 
  on transactions for any part of the list. You can mix and match 
  non-transaction, transactions, or even nested transaction.</p>
  <p>'actions':( {'transaction':('login','update','logout')} )</p>
  <dl class="fields">
    <dt>Overrides:
        <a href="antaresia.management.elsewhere.base.BaseAction-class.html#revert">base.BaseAction.revert</a>
        <dd><em class="note">(inherited documentation)</em></dd>
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="finalize"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">finalize</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="antaresia.management.elsewhere.scp-pysrc.html#SCPPushAction.finalize">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Finalize the scp push. This is probably one of the only cases where 
  this is needed. It's needed because the tmp copy on the server can't be 
  deleted until at least all actions are done OR transactions have been 
  rolled back. Then this finalize method will delete the tmp copy on the 
  server.</p>
  <dl class="fields">
    <dt>Overrides:
        <a href="antaresia.management.elsewhere.base.BaseAction-class.html#finalize">base.BaseAction.finalize</a>
    </dt>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== CLASS VARIABLE DETAILS ==================== -->
<a name="section-ClassVariableDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variable Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariableDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="mkdir_permission_denied"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">mkdir_permission_denied</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
<code class="variable-quote">'</code><code class="variable-string">Permission was denied to make the target server directory.</code><code class="variable-quote">'</code>
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="missing_serverdir_key"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">missing_serverdir_key</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
<code class="variable-quote">'</code><code class="variable-string">SCP push action requires a \'serverdir\' key in the action parameters</code><span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
<code class="variable-string">.</code><code class="variable-quote">'</code>
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="missing_localdir_key"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">missing_localdir_key</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
<code class="variable-quote">'</code><code class="variable-string">SCP push action requires a \'localdir\' key in the action parameters.</code><code class="variable-quote"></code><span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
<code class="variable-quote">'</code>
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="antaresia.management.elsewhere-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >Elswhere</th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Tue Jun  9 00:16:26 2009
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
